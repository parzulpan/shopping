# shopping-压力测试结果



|                         压力测试内容                         | 压测线程数 | 吞吐量/s | 90% 响应时间 | 99% 响应时间 |
| :----------------------------------------------------------: | :--------: | :------: | :----------: | :----------: |
|                       Nginx(浪费 CPU)                        |     50     |  9,797   |      4       |     103      |
|                       Gateway(浪费CPU)                       |     50     |  27,397  |      3       |      6       |
|                     简单服务(返回字符串)                     |     50     |  45,476  |      3       |      4       |
|                       首页一级菜单渲染                       |     50     |   799    |      76      |     123      |
|                   首页一级菜单渲染(开缓存)                   |     50     |   872    |      70      |     119      |
|         首页一级菜单渲染(开缓存、优化数据库、关日志)         |     50     |  1,687   |      41      |      67      |
|                     首页三级分类数据获取                     |     50     |    6     |    8,204     |    8,317     |
|        首页三级分类数据获取(优化业务，为字段添加索引)        |     50     |    18    |    2,639     |    2,735     |
|    首页三级分类数据获取(优化业务，重写代码，减少查询次数)    |     50     |   299    |     198      |     272      |
|            首页三级分类数据获取(添加 Redis 缓存)             |     50     |  1,315   |      45      |      83      |
|                       首页全量数据获取                       |     50     |    51    |     163      |    3,640     |
| 首页全量数据获取(动静分离，并设置 VM 选项为 -Xmx1024m -Xms1024m -Xmn512m) |     50     |    66    |    1,149     |    2,663     |
|                        Nginx+GateWay                         |     50     |          |              |              |
|                       Gateway+简单服务                       |     50     |  10,276  |      8       |      17      |
|                    Nginx+GateWay+简单服务                    |     50     |    25    |     2005     |     2014     |

**得到的结论**：

* 中间件越多，性能损失越大哦，大多都损失在网络交互
* 业务问题
  * DB（MySQL 优化）
  * 模板的渲染速度（开发时关闭缓存，上线时开启缓存）
  * 静态资源（Nginx 动静分离）